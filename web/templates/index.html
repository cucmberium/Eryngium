{% extends "base.html" %}
{% block content %}
    <section id="about">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>あなたにおすすめのユーザーを検索します</h2>
            <div class="input-group">
              <span class="input-group-addon" id="basic-addon1">@</span>
              <input type="text" class="form-control" placeholder="username@domain" aria-describedby="basic-addon1" id="acct">
              <span class="input-group-btn">
                <button class="btn btn-secondary" type="button" onclick="search()">検索</button>
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script type="text/javascript">
    document.getElementById('acct').addEventListener('keypress', function(e) {
      if (e.keyCode == 13) {
        search();
      }
    });

    function search() {
      if (!document.getElementById('acct').value.match(/([a-zA-Z0-9_]+)@(.+)/g)) {
        alert("入力形式が不正です");
      } else {
        location.href = "{% url 'index' %}" + "users/" + document.getElementById('acct').value + "/";
      }
    }
    </script>
{% endblock %}